<div class="container-fluid">
    <h1 class="mt-4">Inventory</h1>

    <style>
        #brurya-inventory-list table th:first-child,
        #brurya-inventory-list table td:first-child {
            text-align: right;
        }
        #brurya-inventory-list table td {
            padding-top: 0.2rem; /* Reduce top padding */
            padding-bottom: 0.2rem; /* Reduce bottom padding */
            font-size: 0.9rem; /* Slightly smaller font for more rows */
        }
        #brurya-inventory-list table th {
            font-size: 0.9rem;
        }
    </style>

    <!-- Section for Brurya Inventory Management -->
    <div class="card mb-4">
        <div class="card-header">
            <i class="fas fa-warehouse mr-1"></i>
            Brurya Stock Management
        </div>
        <div class="card-body">
            <div id="brurya-inventory-list">Loading...</div>
        </div>
    </div>
</div>

<script>
    function loadBruryaInventoryData() {
        const listDiv = document.getElementById('brurya-inventory-list');
        listDiv.innerHTML = 'Loading inventory...';

        google.script.run
            .withSuccessHandler(inventoryData => {
                if (!inventoryData || inventoryData.length === 0) {
                    listDiv.innerHTML = '<p>No items found in Brurya inventory.</p>';
                    return;
                }

                let tableHtml = '<table class="table table-hover"><thead><tr><th>Name</th><th>SKU</th><th>Quantity</th></tr></thead><tbody>';
                inventoryData.forEach(item => {
                    tableHtml += `<tr>
                                    <td>${item.Name}</td>
                                    <td>${item.sku}</td>
                                    <td>${item.bruryaQty}</td>
                                  </tr>`;
                });
                tableHtml += '</tbody></table>';
                listDiv.innerHTML = tableHtml;
            })
            .withFailureHandler(err => {
                listDiv.innerHTML = `<div class="alert alert-danger">Error loading inventory: ${err.message}</div>`;
                console.error("Error loading Brurya inventory:", err);
            })
            .WebAppInventory_getBruryaStockList();
    }

    // Self-execute to load the data as soon as the view is loaded.
    loadBruryaInventoryData();
</script>