<div id="manager-orders-widget" class="card h-100">
  <div class="card-header">
    <h5 class="mb-0">Orders</h5>
  </div>
  <div class="card-body">
    <p>Loading...</p>
  </div>
</div>

<script>
  /**
   * Placeholder for a global error display function.
   * In a full application, this would likely be provided by a shared utility.
   * @param {Error} error - The error object.
   */
  function showError(error) {
    console.error("Error in ManagerOrdersWidget:", error);
    const widgetBody = document.querySelector('#manager-orders-widget .card-body');
    if (widgetBody) {
      widgetBody.innerHTML = `<p class="text-danger">Error: ${error.message || error}</p>`;
    }
  }

  /**
   * Populates the manager orders widget with new data from the backend.
   * @param {Object} data - The orders data from the backend.
   */
  function updateManagerOrdersWidget(data) {
    const widgetBody = document.querySelector('#manager-orders-widget .card-body');
    if (!widgetBody) return;

    if (!data) {
      widgetBody.innerHTML = `<p class="text-danger">Error: No data received from server.</p>`;
      return;
    }
    if (data.error) {
      widgetBody.innerHTML = `<p class="text-danger">${data.error}</p>`;
      return;
    }

    let html = ''; // Removed <hr> here
    html += '<p>On-Hold Orders: <strong>' + (data.onHoldCount || 0) + '</strong></p>';
    html += '<p>Processing Orders: <strong>' + (data.processingCount || 0) + '</strong></p>';
    html += '<p>Packing Slips Ready: <strong>' + (data.packingSlipsReadyCount || 0) + '</strong></p>';
    
    widgetBody.innerHTML = html;
  }

  // Initial data load for this view
  google.script.run.withSuccessHandler(updateManagerOrdersWidget).withFailureHandler(showError).WebAppOrders_getOrdersWidgetData();
</script>